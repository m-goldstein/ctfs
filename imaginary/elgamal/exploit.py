from Crypto.Util.number import bytes_to_long as btl, long_to_bytes as ltb, inverse
fp = open('output.txt','r')
body = fp.read().rstrip()
lines = body.split('\n')
gen = int(lines[0][6:])
apub = int(lines[1][7:])
bpub = int(lines[2][7:])
ct = int(lines[3][5:])
apriv = apub//gen
bpriv = bpub//gen
s = apriv*bpriv*gen
flag = 'ictf{'+ltb(ct//s).decode()+'}'
print(f'flag: {flag}')
